# **form-ai-backend-api** — серверная часть проекта FormAI

### [Список изменений с последнего обновления](./CHANGELOG.md)

### [Список поставленных и выполненных задач проекта.](./TODO.md)

## Реализованный функционал API
На данный момент реализовано сохранение изображений, переданных через **POST**-запрос, в каталог `./public/images/` для хранения публичных изображений, а также развёртывание базы данных **sqlite**.
**POST**-запросы принимают только файлы с расширениями `.jpg`, `.jpeg` или `.png`.

| Путь | Метод | Тип и структура данных запроса | Возвращает |
|:----:|:------:|:--------------------------------|:------------|
| `/` | **GET** | Нет. | Код `200 OK` + `json`-словарь с информацией о правильном использовании метода **POST**. |
| `/api/v1/authorize-user` | **POST** | В блоке `params` ключи `email` и `password` должны быть строковыми значениями. | Код `200 OK` + `json`-словарь с сообщением об успешной авторизации, если переданные данные корректны. / Код `500 Bad Request`, если данные неверны или пользователь с такими данными отсутствует в базе. |
| `/api/v1/generate-from-single` | **POST** | В блоке `params` ключ `user_id` **должен быть числовым значением** — уникальный идентификатор пользователя. В блоке `body` значение ключа `image` **должно быть файлом**. | Код `200 OK`, если изображение передано и всё прошло успешно. / Код `500 Bad Request`, если произошла ошибка. |
| `/api/v1/generate-from-multiple` | **POST** | В блоке `params` ключ `user_id` **должен быть числовым значением** — уникальный идентификатор пользователя. В блоке `body` ключ `images` должен быть массивом, содержащим **от 1 до 5 файлов**. | Код `200 OK`, если изображения переданы и всё прошло успешно. / Код `500 Bad Request`, если произошла ошибка. |
| `/api/v1/register-new-user` | **POST** | В блоке `params` ключи `name`, `surname`, `email` и `password` должны быть строковыми значениями. Опционально, в блоке `body` значение ключа `profile_image` **должно быть файлом**. | Код `200 OK` + `json`-словарь с сообщением об успешной регистрации, если данные корректны. / Код `500 Bad Request`, если пользователь с такими данными уже существует. |

Во всех случаях ответ на запрос возвращается в формате `JSON`, который **ВСЕГДА, БЕЗ ИСКЛЮЧЕНИЙ** содержит ключ `"message"` (`{ "message": "..." }`), описывающий результат выполнения запроса.  
Даже если произойдёт ошибка или непредвиденное исключение, отправитель сможет увидеть сообщение от сервера.

## Сборка и запуск
Прежде всего убедитесь, что на вашем ПК установлена [последняя версия Node.js](https://nodejs.org/en).  
Если это так, выполните в корневой директории проекта команду для установки всех зависимостей:
```bat
npm i
```

### Запуск напрямую с использованием TypeScript и `ts-node`:
```bat
npm start
```

### Транспиляция исходного кода в JavaScript и запуск через Node.js:
```bat
npm run js
```

### Только транспиляция исходного кода в JavaScript:
```bash
npx tsc
```
Скомпилированные файлы будут размещены в папке `./dist`.

###### Подробная документация и комментарии к коду будут добавлены позже.
