# **form-ai-backend-api** — серверная часть проекта FormAI.

### [Изменения с последнего обновления](./CHANGELOG_RU.md)

### [Список установленных и выполненных задач проекта.](./TODO.md)

## Реализованный функционал API
На данный момент реализовано сохранение изображений, передаваемых с POST-запросом, в `./public/images/` для хранения публичных изображений, а также развёртывание базы данных SQLite.  
POST-запросы принимают только файлы с расширениями `.jpg`, `.jpeg` или `.png`.

|  Путь   | Метод | Данные запроса | Возвращает |
|:-------:|:------:|:----------------------------------------------------------------------------:|:----:|
| `/` | **GET** | Нет. | Код `200 OK` + `json`-словарь с описанием правильного использования метода **POST** с маршрутами API. |
| `/api/v1/generate-from-single` | **POST** | В блоке `params` ключ `user_id` **должен быть числовым значением** — уникальный ID пользователя. В блоке `body` значение ключа `image` **должно быть файлом**. | Код `200 OK`, если изображение передано и сервер обрботал запрос успешно. / `500 Bad Request`, если что-то пошло не так. |
| `/api/v1/generate-from-multiple` | **POST** | В блоке `params` ключ `user_id` **должен быть числовым значением** — уникальный ID пользователя. В блоке `body` ключ `images` должен быть массивом, содержащим **от 1 до 5 файлов**. | Код `200 OK`, если изображения переданы и сервер обрботал запрос успешно. / `500 Bad Request`, если что-то пошло не так. |

Во всех случаях ответ на запрос представляет собой `JSON`-словарь, который **ВСЕГДА, БЕЗ ИСКЛЮЧЕНИЙ**, содержит ключ `"message"` (`{ "message": "..." }`), описывающий результат запроса.  
В случае если произойдёт ошибка или неожиданное исключение, отправитель сможет увидеть сообщение от сервера.

## Сборка и запуск
Прежде всего убедитесь, что у вас установлена [последняя версия Node.js](https://nodejs.org/en).  
Если всё удовлетворяет требованиям, используйте следующую команду в корне проекта для установки всех зависимостей:
```bat
npm i 
```

### Запуск напрямую с помощью TypeScript и `ts-node`:
```bat 
npm start
```

### Транспиляция исходного кода в JavaScript и запуск через Node.js:
```bat
npm run js
```

### Для транспилиляции исходного кода в JavaScript:
```bash
npx tsc
```

Транспилированные файлы будут расположены в папке `./dist`.

###### Подробная документация и комментарии к коду будут добавлены позже.
